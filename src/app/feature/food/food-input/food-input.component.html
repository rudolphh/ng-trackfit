<div>
  <!-- form -->
  <form
    [formGroup]="addFoodForm"
    (ngSubmit)="onSubmit(formDirective)"
    #formDirective="ngForm"
    class="d-flex flex-column"
    style="max-height: 134px;"
  >
    <div class="d-flex">
      <span class="flex-grow-1" style="min-width: 0">
        <!-- food input -->
        <mat-form-field class="w-100" appearance="fill">
          <mat-label>Food</mat-label>
          <input
            matInput
            placeholder="Ex. Pizza"
            formControlName="name"
            #nameInput
            [matAutocomplete]="auto"
          />
          <mat-autocomplete #auto="matAutocomplete">
            <mat-option
              *ngFor="let option of autocompleteOptions$ | async"
              [value]="option.name"
              (onSelectionChange)="setFood($event, option)"
            >
              <div class="d-flex">
                <span>{{ option.name }}</span>
                <span
                  class="light-text-success ml-2"
                  style="font-size: 0.8em"
                  >{{ option.calories }}</span
                >
              </div>
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
        <!-- end food input -->
      </span>

      <span class="ml-2">
        <!-- calorie input -->
        <mat-form-field style="max-width: 90px" appearance="fill">
          <mat-label>Calories</mat-label>
          <input
            matInput
            placeholder="250"
            maxLength="4"
            formControlName="calories"
            appNumbersOnly
          />
        </mat-form-field>
        <!-- end calorie input -->
      </span>

      <span class="ml-2">
        <!-- submit button -->
        <button
          id="addFoodBtn"
          mat-flat-button
          type="submit"
          style="height: 51px"
          [disabled]="!addFoodForm.valid"
        >
          <i class="fas fa-2x fa-cookie-bite"></i>
        </button>
      </span>
    </div>


    <div *ngIf="!macroOptions" class="d-flex justify-content-center my-1"
      style="position: relative; bottom: 5px; height: 30px"
    >
      <a (click)="toggleMacroOptions()" class="light-text-primary"
        style="cursor: pointer;"
      >Macronutrients <span class="light-text-info">(optional)</span></a>
    </div>

    <app-macro-input
      [isHidden]="!macroOptions"
      [form]="addFoodForm"
      [foodIndex]="-1"
    ></app-macro-input>

  </form>
  <!-- end form -->
</div>
